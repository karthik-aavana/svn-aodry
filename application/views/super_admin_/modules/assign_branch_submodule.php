<?phpdefined('BASEPATH') OR exit('No direct script access allowed');$this->load->view('super_admin/layouts/header');?><div class="content-wrapper">    <section class="content-header">        <h5>            <ol class="breadcrumb">                <li><a href="<?php echo base_url('superadmin/auth/dashboard'); ?>"><i class="fa fa-dashboard"></i> Dashboard</a></li>                <li><a href="<?php echo base_url('superadmin/modules/branch'); ?>">Modules to Branch</a></li>                <li class="active">Assign sub modules</li>            </ol>        </h5>     </section>    <section class="content">        <div class="row">            <div class="col-md-12">                <div class="box">                    <div class="box-header with-border">                        <h3 class="box-title">Assign Sub Modules</h3>                    </div>                    <form role="form" id="form" enctype="multipart/form-data" method="post" action="<?php echo base_url('superadmin/modules/post_branch_access'); ?>">                        <div class="box-body">                                                       <div class="row">                                <div class="col-sm-3">                                    <div class="form-group">                                        <label for="type_of_supply">Module Name <span class="validation-color">*</span>                                        </label>                                        <select class="form-control select2" id="module_id" name="module_id">                                            <option value="">Select</option>                                            <?php foreach ($modules as $module) { ?>                                                <option value='<?php echo $module->module_id ?>'>                                                    <?php echo $module->module_name; ?></option>                                            <?php } ?>                                        </select> <span class="validation-color" id="err_module_id"><?php echo form_error('module_id'); ?></span>                                    </div>                                </div>                                <div class="col-sm-3">                                    <div class="form-group">                                        <label for="type_of_supply">Sub Module Name <span class="validation-color">*</span>                                        </label>                                        <select class="form-control select2" id="sub_module_id" name="sub_module_id">                                            <option value="">Select</option>                                        </select> <span class="validation-color" id="err_sub_module_id"><?php echo form_error('sub_module_id'); ?></span>                                    </div>                                </div>                                                                       <div class="col-md-2">                                    <div class="box-footer mt-15 pull-left">                                        <button type="submit" id="model_submit" class="btn btn-info">Add</button>                                    </div>                                </div>                            </div>                            <div class="row">                                <div class="col-sm-12">                                    <?php                                    $branch_id = $this->uri->segment(4);                                    $branch_id = $this->encryption_url->decode($branch_id); // $user_id = $this->uri->segment(4);                                     ?>                                    <p style="display: none;" id="branch_id">                                        <?= $branch_id ?>                                    </p>                                    <div id="test">                                        <table id="index" class="table table-bordered table-striped table-hover table-responsive active_sub_modules">                                            <thead>                                                    <!-- <p style="display: none;" id="user_id"><?= $user_id ?></p> -->                                                <tr>                                                    <th>Sub Module</th>                                                    <th>Action</th>                                                </tr>                                            </thead>                                            <tbody></tbody>                                        </table>                                    </div>                                </div>                            </div>                        </div>                     </form>                </div>            </div>        </div>    </section></div><script type="text/javascript">var base_url = "<?php echo base_url(); ?>";</script><?php$this->load->view('layout/footer');// $this->load->view('general/modal/delete_modal');?><script type="text/javascript">    function sub_module_content(result)    {        $('#sub_module_id').html('');        var option='<option value="">Select</option>';        $('.active_sub_modules tbody').html('');        var tr='';        if(result.success=='1')        {            for (var i = 1; i <result.sub_modules.length; i++)             {                option+='<option value="'+result.sub_modules[i].sub_module_id+'">'+result.sub_modules[i].sub_module_name+'</option>';            }            for (var j = 0; j <result.active_sub_modules.length; j++)             {                tr+='<tr><td>'+result.active_sub_modules[j].sub_module_name+'</td>';                tr+='<td><a data-toggle="modal" data-target="#delete_modal" data-id="'+result.active_sub_modules[j].active_sub_module_id+'" title="Delete" class="delete_record btn btn-xs btn-danger"><span class="glyphicon glyphicon-trash"></span></a></td></tr>';            }        }        $('#sub_module_id').html(option);        $('.active_sub_modules tbody').html(tr);    }        $(document).ready(function () {        // var tes= $("#index").parents("tr").children("td:first").text();      // alert(tes);    $(document).on("change", "#module_id", function (){        var branch_id = $("#branch_id").text();        var module_id = $("#module_id").val();        $.ajax({            url: base_url + 'superadmin/modules/get_sub_modules',            dataType: 'JSON',            type: "POST",            data:            {                'branch_id' : branch_id,                'module_id' : module_id            },            success: function (result)            {                sub_module_content(result);            }        })    });    $("#model_submit").click(function(e)    {        e.preventDefault();        var branch_id = $("#branch_id").text();        var module_id = $("#module_id").val();        var sub_module_id = $("#sub_module_id").val();        if ($('#module_id').val() == "")        {            $('#err_module_id').text("Please Select Module.");            $('#module_id').focus();            return !1        }        else        {            $('#err_module_id').text("");        }        if ($('#sub_module_id').val() == "")        {            $('#err_sub_module_id').text("Please Select Sub Module.");            $('#sub_module_id').focus();            return !1        }        else        {            $('#err_sub_module_id').text("");        }        $.ajax({            url: base_url + 'superadmin/modules/add_active_sub_module',            dataType: 'JSON',            type: "POST",            data:            {                'branch_id' : branch_id,                'module_id' :module_id,                'sub_module_id' :sub_module_id            },            success: function (result)            {                // location.reload();                sub_module_content(result);            }      })    })    })  </script><script type="text/javascript">    $(document).on("click", ".delete_record", function (){        var id=$(this).data('id');        var r = confirm("Are u sure?");     if(r==true){      $.ajax({        url: base_url + 'superadmin/modules/active_sub_module_delete/'+id,        dataType: 'JSON',        type: "POST",        data:            {                'branch_id' : $("#branch_id").text(),                'module_id' : $("#module_id").val()            },        success: function (result)        {            sub_module_content(result);        }                });     }     else{     }    });</script>