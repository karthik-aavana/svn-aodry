/*
	jQuery autoComplete v1.0.7
    Copyright (c) 2014 Simon Steinberger / Pixabay
    GitHub: https://github.com/Pixabay/jQuery-autoComplete
	License: http://www.opensource.org/licenses/mit-license.php
*/

!function(e){e.fn.autoComplete=function(t){var s=e.extend({},e.fn.autoComplete.defaults,t);return"string"==typeof t?(this.each(function(){var s=e(this);"destroy"==t&&(e(window).off("resize.autocomplete",s.updateSC),s.off("blur.autocomplete focus.autocomplete keydown.autocomplete keyup.autocomplete"),s.data("autocomplete")?s.attr("autocomplete",s.data("autocomplete")):s.removeAttr("autocomplete"),e(s.data("sc")).remove(),s.removeData("sc").removeData("autocomplete"))}),this):this.each(function(){var t=e(this);function o(e){var o=t.val();if(t.cache[o]=e,e.length&&o.length>=s.minChars){for(var a="",c=0;c<e.length;c++)a+=s.renderItem(e[c],o);t.sc.html(a),t.updateSC(0)}else t.sc.hide()}t.sc=e('<div class="autocomplete-suggestions '+s.menuClass+'"></div>'),t.data("sc",t.sc).data("autocomplete",t.attr("autocomplete")),t.attr("autocomplete","off"),t.cache={},t.last_val="",t.updateSC=function(s,o){if(t.sc.css({top:t.offset().top+t.outerHeight(),left:t.offset().left,width:t.outerWidth()}),!s&&(t.sc.show(),t.sc.maxHeight||(t.sc.maxHeight=parseInt(t.sc.css("max-height"))),t.sc.suggestionHeight||(t.sc.suggestionHeight=e(".autocomplete-suggestion",t.sc).first().outerHeight()),t.sc.suggestionHeight))if(o){var a=t.sc.scrollTop(),c=o.offset().top-t.sc.offset().top;c+t.sc.suggestionHeight-t.sc.maxHeight>0?t.sc.scrollTop(c+t.sc.suggestionHeight+a-t.sc.maxHeight):c<0&&t.sc.scrollTop(c+a)}else t.sc.scrollTop(0)},e(window).on("resize.autocomplete",t.updateSC),t.sc.appendTo("body"),t.sc.on("mouseleave",".autocomplete-suggestion",function(){e(".autocomplete-suggestion.selected").removeClass("selected")}),t.sc.on("mouseenter",".autocomplete-suggestion",function(){e(".autocomplete-suggestion.selected").removeClass("selected"),e(this).addClass("selected")}),t.sc.on("mousedown click",".autocomplete-suggestion",function(o){var a=e(this),c=a.data("val");return(c||a.hasClass("autocomplete-suggestion"))&&(t.val(c),s.onSelect(o,c,a),t.sc.hide()),!1}),t.on("blur.autocomplete",function(){try{over_sb=e(".autocomplete-suggestions:hover").length}catch(e){over_sb=0}over_sb?t.is(":focus")||setTimeout(function(){t.focus()},20):(t.last_val=t.val(),t.sc.hide(),setTimeout(function(){t.sc.hide()},350))}),s.minChars||t.on("focus.autocomplete",function(){t.last_val="\n",t.trigger("keyup.autocomplete")}),t.on("keydown.autocomplete",function(o){var a;if((40==o.which||38==o.which)&&t.sc.html())return(c=e(".autocomplete-suggestion.selected",t.sc)).length?(a=40==o.which?c.next(".autocomplete-suggestion"):c.prev(".autocomplete-suggestion")).length?(c.removeClass("selected"),t.val(a.addClass("selected").data("val"))):(c.removeClass("selected"),t.val(t.last_val),a=0):(a=40==o.which?e(".autocomplete-suggestion",t.sc).first():e(".autocomplete-suggestion",t.sc).last(),t.val(a.addClass("selected").data("val"))),t.updateSC(0,a),!1;if(27==o.which)t.val(t.last_val).sc.hide();else if(13==o.which||9==o.which){var c;(c=e(".autocomplete-suggestion.selected",t.sc)).length&&t.sc.is(":visible")&&(s.onSelect(o,c.data("val"),c),setTimeout(function(){t.sc.hide()},20))}}),t.on("keyup.autocomplete",function(a){if(!~e.inArray(a.which,[13,27,35,36,37,38,39,40])){var c=t.val();if(c.length>=s.minChars){if(c!=t.last_val){if(t.last_val=c,clearTimeout(t.timer),s.cache){if(c in t.cache)return void o(t.cache[c]);for(var l=1;l<c.length-s.minChars;l++){var i=c.slice(0,c.length-l);if(i in t.cache&&!t.cache[i].length)return void o([])}}t.timer=setTimeout(function(){s.source(c,o)},s.delay)}}else t.last_val=c,t.sc.hide()}})})},e.fn.autoComplete.defaults={source:0,minChars:3,delay:150,cache:1,menuClass:"",renderItem:function(e,t){item_val=e.replace(/<span .*?<\/span>/g,""),t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var s=new RegExp("("+t.split(" ").join("|")+")","gi");return""!=t&&(e=e.replace(s,"<b>$1</b>")),'<div class="autocomplete-suggestion" data-val="'+item_val+'">'+e+"</div>"},onSelect:function(e,t,s){}}}(jQuery);