var app={ready:e=>{"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)},menu:{},search:{},keys:{},overlay:{},animations:{tracked:[]}};app.ready(()=>{app.search.init(),app.menu.init(),app.keys.init(),app.overlay.init(),document.addEventListener("keyup",e=>{e.keyCode==app.keys.ESC&&app.keys.handleESC()}),document.addEventListener("keydown",e=>{e.keyCode==app.keys.arrowUp?app.keys.handleArrowUp(e):e.keyCode==app.keys.arrowDown?app.keys.handleArrowDown(e):e.keyCode==app.keys.enter&&app.keys.handleEnter(e)}),window.addEventListener("scroll",app.animations.onlyPlayVisible)}),app.search.init=(()=>{app.search.visible=!1,app.search.storageKey="globalSearchData";var e=document.querySelector(".js-search");e&&(app.search.searchIcon=e,app.search.loadData(),document.addEventListener("app:menuDidHide",app.search.showIcon),document.addEventListener("app:menuWillShow",app.search.hideIcon),document.querySelector(".js-search").addEventListener("click",e=>{e.preventDefault(),app.search.visible?app.search.hide():app.search.reveal(e)}),document.querySelector(".js-search-input").addEventListener("input",e=>{app.search.updateResultsForQuery(e.target.value)}))}),app.search.loadData=(()=>{var e=localStorage.getItem(app.search.storageKey);if(e){var a=JSON.parse(e);app.search.data=a.items}else fetch("/js/searchable.json").then(e=>e.json()).then(e=>{localStorage.setItem(app.search.storageKey,JSON.stringify(e)),app.search.data=e.items}).catch(e=>{})}),app.search.updateResultsForQuery=(e=>{e=e.toLowerCase();for(var a=[],t=0;t<app.search.data.length;t++){-1!=Object.values(app.search.data[t]).join(" ").toLowerCase().indexOf(e)&&a.push(app.search.data[t])}app.search.renderResults(a,e)}),app.search.renderResults=((e,a)=>{var t=document.createElement("div");t.classList.add("site-search-content-results-list");for(var s=0;s<e.length;s++){var i=document.createElement("a"),p="site-search-results-item js-site-search-results-item";0==s&&(p+=" site-search-results-item-active"),i.classList=p,i.href=e[s].url,i.textContent=e[s].title;var r=document.createElement("span");r.classList="site-search-results-item-description",r.textContent=e[s].description,i.appendChild(r),t.appendChild(i)}if(0==e.length){var n=document.createElement("span");n.classList="site-search-results-item site-search-results-item-message",n.textContent='No hits for "'+a+'"',t.appendChild(n)}(e=document.querySelector(".js-site-search-content-results")).innerHTML="",e.appendChild(t);for(let e of document.querySelectorAll(".js-site-search-results-item"))e.addEventListener("mouseenter",e=>app.search.focusItem(e.target))}),app.menu.init=(()=>{app.menu.visible=!1,app.menu.icon=document.querySelector(".menu"),app.menu.icon.addEventListener("click",e=>{e.preventDefault(),app.menu.visible?app.menu.hide():app.menu.reveal(e)})}),app.menu.toggleStates=(()=>{document.querySelector("body").classList.toggle("no-scroll"),app.menu.icon.classList.toggle("menu-active"),document.querySelector(".js-nav").classList.toggle("site-nav-active")}),app.search.toggleStates=(()=>{document.querySelector("body").classList.toggle("no-scroll"),document.querySelector(".js-search-overlay").classList.toggle("site-nav-active")}),app.menu.reveal=(e=>{app.menu.visible=!0,app.menu.toggleStates(),document.dispatchEvent(new Event("app:menuWillShow")),app.overlay.show({position:app.clickPosition(e),fill:"#1f4954"});var a=200;anime({targets:".js-nav",opacity:[0,1],delay:a,easing:"easeInOutExpo",duration:200});a+=75,document.querySelector(".js-nav-header").style.opacity=0,anime({targets:".js-nav-header",opacity:[0,1],delay:a,easing:"easeInOutExpo",duration:200}),document.querySelector(".js-nav-header-line").style.transform.replace(/scale\([0-9|\.]*\)/,"scale(0.2)"),anime({targets:".js-nav-header-line",scaleX:[.28,1],delay:a,easing:"easeInOutExpo",duration:600}),a+=350;for(let e of document.querySelectorAll(".js-nav-animate"))e.style.opacity=0,e.style.transform.replace(/scale\([0-9|\.]*\)/,"scale(0.9)");anime({targets:".js-nav-animate",translateY:["-7px",0],scale:[.9,1],opacity:[0,1],delay:(e,t)=>a+90*(t+1),duration:1100,easing:"easeOutExpo",complete:()=>{document.dispatchEvent(new Event("app:menuDidReveal"))}})}),app.search.reveal=(e=>{app.search.toggleStates(),app.search.visible=!0,app.menu.hideMenuIcon(),app.overlay.show({position:app.clickPosition(e),fill:"#1f4954"});anime({targets:".site-search-icon",translateY:"-5px",rotate:90,duration:400,scale:0,easing:"easeOutExpo",delay:200}),anime({targets:".site-search-close-icon",opacity:1,scale:[0,1],duration:400,easing:"easeOutExpo",delay:200}),anime({targets:".site-search-close-icon-line-1",rotateZ:[45,225],duration:400,easing:"easeOutExpo",delay:200}),anime({targets:".site-search-close-icon-line-2",rotateZ:[45,135],duration:400,easing:"easeOutExpo",delay:200}),document.querySelector(".js-search-input").style.opacity=0,anime.timeline().add({targets:".js-search-overlay",opacity:[0,1],delay:200,easing:"easeInOutExpo",duration:200}).add({targets:".js-search-input",opacity:[0,1],easing:"easeOutExpo",translateX:["25px",0],duration:700}),document.querySelector(".js-search-input").focus()}),app.search.moveSelectionInDirection=(e=>{var a=document.querySelector(".site-search-results-item-active");if(a){var t="up"===e.direction?a.previousElementSibling:a.nextElementSibling;null!=t&&(a.classList.remove("site-search-results-item-active"),t.classList.add("site-search-results-item-active"))}}),app.search.moveSelectionUp=(()=>app.search.moveSelectionInDirection({direction:"up"})),app.search.moveSelectionDown=(()=>app.search.moveSelectionInDirection({direction:"down"})),app.search.focusItem=(e=>{document.querySelector(".site-search-results-item-active").classList.remove("site-search-results-item-active"),e.classList.add("site-search-results-item-active")}),app.search.goToSelectedItem=(()=>{var e=document.querySelector(".site-search-results-item-active");e&&(window.location.href=e.getAttribute("href"))}),app.search.hide=(()=>{app.search.toggleStates(),app.search.visible=!1;app.overlay.hide({position:app.overlay.lastStartingPoint,fill:"#1f4954",complete:()=>app.menu.showMenuIcon()}),anime({targets:".js-search-input",opacity:[1,0],easing:"easeInExpo",duration:400,translateX:[0,"25px"]}),anime({targets:".js-search-overlay",opacity:[1,0],delay:200,easing:"easeInOutExpo",duration:200}),anime({targets:".site-search-close-icon",opacity:[1,0],scale:0,duration:400,easing:"easeOutExpo",delay:200}),anime({targets:".site-search-close-icon-line-1",rotateZ:[225,45],duration:400,easing:"easeOutExpo",delay:200}),anime({targets:".site-search-close-icon-line-2",rotateZ:[135,45],duration:400,easing:"easeOutExpo",delay:200}),anime({targets:".site-search-icon",translateY:["-5px","0px"],rotate:[90,0],duration:400,opacity:[0,1],scale:[0,1],easing:"easeOutExpo",delay:200})}),app.menu.hide=(()=>{app.menu.visible=!1,app.menu.toggleStates(),document.dispatchEvent(new Event("app:menuWillHide")),app.overlay.hide({position:app.overlay.lastStartingPoint,fill:"#1f4954",complete:()=>document.dispatchEvent(new Event("app:menuDidHide"))}),anime({targets:".js-nav",opacity:[1,0],easing:"easeInOutExpo",duration:200}),anime({targets:".js-nav-header-line",scale:[1,.5],easing:"easeInExpo",duration:300}),anime({targets:".js-nav-animate",translateY:"10px",scale:[1,.9],opacity:[1,0],easing:"easeInExpo",duration:200})}),app.menu.hideMenuIcon=(()=>{app.menu.icon.style.display="none"}),app.menu.showMenuIcon=(()=>{app.menu.icon.style.opacity=0,app.menu.icon.style.display="",anime({targets:".menu",opacity:1,duration:500,easing:"easeOutQuart"})}),app.search.hideIcon=(()=>{app.search.searchIcon&&(app.search.searchIcon.style.display="none")}),app.search.showIcon=(()=>{app.search.searchIcon&&(app.search.searchIcon.style.opacity=0,app.search.searchIcon.style.display="",anime({targets:".js-search",opacity:1,duration:500,easing:"easeOutQuart"}))}),app.keys.handleESC=(()=>{document.dispatchEvent(new Event("pressed:ESC")),app.menu.visible?app.menu.hide():app.search.visible&&app.search.hide()}),app.keys.init=(()=>{app.keys.ESC=27,app.keys.arrowUp=38,app.keys.arrowDown=40,app.keys.enter=13}),app.keys.handleArrowUp=(e=>{app.search.visible&&(e.preventDefault(),app.search.moveSelectionUp())}),app.keys.handleArrowDown=(e=>{app.search.visible&&(e.preventDefault(),app.search.moveSelectionDown())}),app.keys.handleEnter=(e=>{app.search.visible&&(e.preventDefault(),app.search.goToSelectedItem())}),app.animations.track=((e,a)=>{app.animations.tracked.push({timeline:e,element:a})}),app.animations.onlyPlayVisible=(()=>{app.animations.tracked.forEach(e=>{app.animations.shouldPlay(e)?e.timeline.play():e.timeline.pause()})}),app.animations.shouldPlay=(e=>{var a=window.innerHeight,t=e.element.getBoundingClientRect();return!(t.bottom<5||t.top>a-5)}),app.overlay.init=(()=>{app.overlay.c=document.querySelector(".site-nav-canvas"),app.overlay.ctx=app.overlay.c.getContext("2d"),app.overlay.cH,app.overlay.cW,app.overlay.bgColor="transparent",app.overlay.resizeCanvas(),app.overlay.lastStartingPoint={x:0,y:0},window.addEventListener("resize",app.overlay.resizeCanvas)}),app.overlay.resizeCanvas=function(){app.overlay.cW=window.innerWidth,app.overlay.cH=window.innerHeight,app.overlay.c.width=app.overlay.cW*window.devicePixelRatio,app.overlay.c.height=app.overlay.cH*window.devicePixelRatio,app.overlay.ctx.scale(window.devicePixelRatio,window.devicePixelRatio),app.overlay.ctx.fillStyle=app.overlay.bgColor,app.overlay.ctx.fillRect(0,0,app.overlay.cW,app.overlay.cH)},app.overlay.show=function(e){app.overlay.c.style.display="block",app.overlay.lastStartingPoint=e.position,e.targetRadius=app.overlay.calcPageFillRadius(e.position.x,e.position.y),e.startRadius=0,e.easing="easeOutQuart",app.overlay.animate(e)},app.overlay.hide=(e=>{e.targetRadius=0,e.easing="easeInOutQuart";var a=e.complete;e.complete=(()=>{app.overlay.c.style.display="none",app.overlay.bgColor="transparent",a&&a()}),e.startRadius=app.overlay.calcPageFillRadius(e.position.x,e.position.y),app.overlay.animate(e)}),app.overlay.animate=(e=>{app.overlay.bgColor=e.fill,app.overlay.circle.x=e.position.x,app.overlay.circle.y=e.position.y,app.overlay.circle.r=e.startRadius,app.overlay.circle.fill=e.fill,anime({targets:app.overlay.circle,r:e.targetRadius,duration:Math.max(e.targetRadius/2,750),easing:e.easing,complete:e.complete?e.complete:null,update:()=>app.overlay.circle.draw({startRadius:e.startRadius,targetRadius:e.targetRadius})})}),app.overlay.calcPageFillRadius=function(e,a){var t=Math.max(e-0,app.overlay.cW-e),s=Math.max(a-0,app.overlay.cH-a);return Math.sqrt(Math.pow(t,2)+Math.pow(s,2))},app.clickPosition=(e=>{if(e.touches&&(e=e.touches[0]),e.clientX&&e.clientY)return{x:e.clientX,y:e.clientY};var a=e.target.getBoundingClientRect();return{x:a.top+(a.bottom-a.top)/2,y:a.left+(a.right-a.left)/2}}),app.overlay.circle={},app.overlay.circle.draw=function(e){e.targetRadius<e.startRadius&&app.overlay.ctx.clearRect(0,0,app.overlay.cW,app.overlay.cH),app.overlay.ctx.beginPath(),app.overlay.ctx.arc(this.x,this.y,this.r,0,2*Math.PI,!1),app.overlay.ctx.fillStyle=this.fill,app.overlay.ctx.fill(),app.overlay.ctx.closePath()};