if (typeof tax_ajax === 'undefined' || tax_ajax === null){    var tax_ajax = "no"}var general_regex = /^[a-zA-Z\[\]/@()#$%&\-.+,\d\-_\s\']+$/;//var price_regex = /^\$?[0-9]+(\.[0-9][0-9])?$/;$(document).ready(function (){    var tax_exist = 0;    $(document).on('click', "#add_tax_submit", function (event) {        var tax_name = $('#tax_name').val();        var tax_value = $('#tax_value').val();        var tax_section = $('#cmb_section').val();        // var description = $('#description').val();        if (tax_name == null || tax_name == "")        {            $("#err_tax_name_add").text("Please Select Tax Type.");            return !1;        } else        {            $("#err_tax_name_add").text("")        }        if ((tax_section == null && tax_name == 'TCS') || (tax_section == null && tax_name == 'TDS') || (tax_section == "" && tax_name == 'TDS') || (tax_section == "" && tax_name == 'TCS')) {            $('#err_tax_section_name').text("Please Select Section.");            return !1        } else {            $("#err_tax_section_name").text("")        }        if (!tax_name.match(general_regex))        {            $('#err_tax_name').text(" Please Enter Valid Tax Name");            return !1;        } else        {            $("#err_tax_name").text("")        }        if (tax_value == null || tax_value == "")        {            $("#err_tax_value").text("Please Enter Tax Value.");            return !1        } else        {            $("#err_tax_value").text("")        }        if (!tax_value.match(price_regex))        {            $('#err_tax_value').text(" Please Enter Valid Tax Percentage ");            return !1        } else        {            $("#err_tax_value").text("")        }        if (tax_exist > 0)        {            $('#err_tax_value').text("The tax rate is already exist.");            return !1        } else        {            $('#err_tax_value').text("");        }               if (!(tax_value >= 0 && tax_value <= 100)) {            $('#err_tax_value').text("Please Enter Valid Tax Percentage.");            return !1;        } else {            $('#err_tax_value').text("");        }        if (tax_ajax == "no")        {            var data = $('#form_tax').serialize();            $.ajax(            {                url: base_url + "tax/add_tax",                dataType: 'JSON',                method: 'POST',                data: data ,                beforeSend: function(){                                $("#loader").show();               },                success:function(result)                {                    if(result.flag){                                               $("#loader").hide();                         $('#add_tax').modal('hide');                        dTable.destroy();                        dTable = GetAllTax();                        alert_d.text = result.msg;                        PNotify.success(alert_d);                        $('#form_tax').trigger("reset");                         $('#tax_name, #cmb_section').select2();/*                        $('#cmb_section').select2();*/                    }else{                        alert_d.text = result.msg;                        PNotify.error(alert_d);                       }                },                error: function(msg){                    alert_d.text = 'Something Went Wrong';                    PNotify.error(alert_d);                },                         });        }        if (tax_ajax == "yes")        {            $.ajax(            {                url: base_url + "tax/add_tax_ajax",                dataType: 'JSON',                method: 'POST',                data:{                        'tax_name': $('#tax_name').val(),                        'tax_value': $('#tax_value').val(),                        'description': $('#description').val(),                        'section_id': $('#cmb_section').val()                    },                success: function (result)                {                    var tax_item_type = $('#tax_item_type').val();                    var data = result.data;                    if (tax_item_type == "product")                    {                        $('#product_tax').html('');                        $('#product_tax').append('<option value="0">No Tax</option>');                        for (i = 0; i < data.length; i++)                        {                            $('#product_tax').append('<option value="' + data[i].tax_id + '-' + data[i].tax_value + '">' + data[i].tax_name + '</option>')                        }                        var tax_value = parseFloat(result.tax_value).toFixed(2);                        $("#product_tax").select2().val(result.id + '-' + tax_value).trigger('change.select2');                        $("#taxForm")[0].reset();                        $("#product_tax").change()                    } else if (tax_item_type = "service")                    {                        $('#service_tax').html('');                        $('#service_tax').append('<option value="0">No Tax</option>');                        for (i = 0; i < data.length; i++)                        {                            $('#service_tax').append('<option value="' + data[i].tax_id + '-' + data[i].tax_value + '">' + data[i].tax_name + '</option>')                        }                        var tax_value = parseFloat(result.tax_value).toFixed(2);                        $("#service_tax").select2().val(result.id + '-' + tax_value).trigger('change.select2');                        $("#taxForm")[0].reset();                        $("#service_tax").change()                    }                }            });        }    });    $("#tax_value").on("blur keyup", function (event)    {        check_tax();    });    $("#tax_name").on("change", function (event){        var tax_name = $('#tax_name').val();        if(tax_name != ''){            //check_tax();        }    });//    $("#cmb_section").on("change", function (event)//    {//        check_tax();//    });    function check_tax() {        var tax_id = $('#tax_id').val();        var tax_name = $('#tax_name').val();       var tax_value = $('#tax_value').val();        var section_id = $('#cmb_section').val();        if (tax_value == null || tax_value == "")        {            $("#err_tax_value").text("Please Enter Tax Value.");            $('#s_gst').hide();            return !1;        } else        {            $("#err_tax_value").text("")        }        if (parseFloat(tax_value) > 100) {            $("#err_tax_value").text("Please Enter Tax Value Between 1 to 100");            return false;        } else {            $("#err_tax_value").text("")        }        $.ajax(                {                    url: base_url + 'tax/get_tax',                    type: "POST",                    dataType: "json",                    data: {tax_value: tax_value, tax_id: tax_id, tax_name: tax_name, section_id: section_id},                    success: function (data)                    {                        if (data[0].num_tax_value > 0)                        {                            $('#err_tax_value').text("The tax rate is already exist.");                            //  $('#tax_value').val('');                            tax_exist = 1;                        } else                        {                            $('#err_tax_value').text("");                            tax_exist = 0;                        }                    }                });    }    // $("#description").on("blur", function (event)    // {    //     var description = $('#tax_description').val();    //     if (description != "" ){    //         if (!description.match(general_regex)){    //             $('#err_description').text("Please Enter Valid Description");    //             return !1    //         } else    //         {    //             $("#err_description").text("")    //         }    //     }    // });});